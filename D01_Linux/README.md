## №1. Установка ОС

<div>
<ol>
<li>

Узнайте версию Ubuntu, выполнив команду

> cat /etc/issue

<img src="./image/1.1.jpg" alt="Скриншот"/>
</li>
</ol>
</div>

## №2. Создание пользователя

<div>
<ol>
<li>

Создания нового пользователя:

> sudo adduser school21

Вам будет предложено ввести пароль для нового пользователя и дополнительные сведения о пользователе, такие как имя и номер телефона (эти поля можно оставить пустыми, нажав "Enter" по умолчанию).</li>
<li>

Добавление в группу "adm":
Запустите следующую команду, чтобы добавить нового пользователя в группу "adm":

> sudo usermod -aG adm school21

Здесь:  
`usermod` - команда для модификации данных пользователя.  
`-aG adm` - ключи, означающие добавление пользователя (-a) в группу (-G) с именем "adm".  
`newuser` - имя созданного вами нового пользователя.</li>
<li>

Вставьте скриншот вызова команды для создания пользователя.

<img src="./image/2.1.jpg" alt="Скриншот"/></li>
<li>

Новый пользователь должен быть в выводе команды

> cat /etc/passwd

<img src="./image/2.2.jpg" alt="Скриншот"/></li>
</ol>
</div>

## №3. Настройка сети ОС

<div>
<ol>
<li>

Задайте название машины вида user-1  
Чтобы изменить название машины выполните следующие команды:  
> sudo vim /etc/hostname  
> reboot  

<img src="./image/3.1.jpg" alt="Скриншот"/></li>
<li>

Проверьте текущую временную зону  

> timedatectl

<img src="./image/3.2.jpg" alt="Скриншот"/>

Список доступных временных зон  

> timedatectl list-timezones

<img src="./image/3.3.jpg" alt="Скриншот"/>

Установите временную зону, соответствующую вашему текущему местоположению  

> sudo timedatectl set-timezone Zone/Subzone

<img src="./image/3.4.jpg" alt="Скриншот"/></li>
<li>

Выведите названия сетевых интерфейсов с помощью консольной команды  

> ip link show

<img src="./image/3.5.jpg" alt="Скриншот"/>

lo или local loopback (локальная петля). Служит для подключения по сети к этому же компьютеру и не требует дополнительной настройки</li>
<li>

Получитe ip адрес устройства, на котором вы работаете, от DHCP сервера.

> ip a

<img src="./image/3.6.jpg" alt="Скриншот"/>

Dynamic Host Configuration Protocol (DHCP) — автоматический предоставляет IP адреса и прочие настройки сети (маску сети, шлюз и т.п) компьютерам и различным устройствам в сети.</li>
<li>

Определите и выведите на экран внешний ip-адрес шлюза (ip) и внутренний IP-адрес шлюза, он же ip-адрес по умолчанию (gw).  

> curl ifconfig.me  
> ip route | grep dafault

<img src="./image/3.7.jpg" alt="Скриншот"/></li>

46.138.176.90 - внешний адрес  
10.0.2.2 - внутренний адрес

<li>
Задать статичные (заданные вручную, а не полученные от DHCP сервера)

> sudo nano /etc/netplan/00-installer-config.yaml

Внутри редактора измените содержимое файла на следующее (замените enp0s3 на имя вашего сетевого интерфейса, addresses на желаемый статичный IP-адрес, gateway4 на IP-адрес вашего шлюза, и 8.8.8.8 на IP-адрес DNS-сервера):

Редактируем  

<img src="./image/3.8.jpg" alt="Скриншот"/>  

Проверяем изменения  

<img src="./image/3.9.jpg" alt="Скриншот"/>  

Пингуем удалённые хосты  

<img src="./image/3.10.jpg" alt="Скриншот"/>  

</li>
</ol>
</div>

## №4. Обновление ОС

<div>
<ol>
<li>

Обновите системные пакеты до последней на момент выполнения задания версии  

<img src="./image/4.1.jpg" alt="Скриншот"/>
</li>
</ol>
</div>

## №5. Использование команды sudo

<div>
<ol>
<li>

Разрешите пользователю, созданному в Part 2, выполнять команду sudo.  
Sudo — это утилита, предоставляющая привилегии root для выполнения административных операций в соответствии со своими настройками. Она позволяет легко контролировать доступ к важным приложениям в системе. По умолчанию, при установке Ubuntu первому пользователю (тому, который создаётся во время установки) предоставляются полные права на использование sudo. Т.е. фактически первый пользователь обладает той же свободой действий, что и root.</li>

> sudo usermod -aG sudo school21  
> su - school21  

<img src="./image/5.1.jpg" alt="Скриншот"/>

> hostname user-2  

<img src="./image/5.2.jpg" alt="Скриншот"/></li>
</ol>
</div>

## №6. Установка и настройка службы времени

<div>
<ol>
<li>

Настройте службу автоматической синхронизации времени.  
Вывод следующей команды должен содержать NTPSynchronized=yes:
timedatectl show

> sudo apt install -y ntp  
> sudo systemctl enable ntp  
> sudo systemctl start ntp  
> timedatectl show  

<img src="./image/6.1.jpg" alt="Скриншот"/>

</li>
</ol>
</div>

## №7. Установка и использование текстовых редакторов

<div>
<ol>
<li>

Установите текстовые редакторы VIM (+ любые два по желанию NANO, MCEDIT, JOE и т.д.)  
> sudo apt install vim  
> sudo apt install nano  
> sudo apt install mcedit
</li>
<li>

Используя каждый из трех выбранных редакторов, создайте файл test_X.txt, где X -- название редактора, в котором создан файл. Напишите в нём свой никнейм, закройте файл с сохранением изменений.</li>
<li>

Используя каждый из трех выбранных редакторов, откройте файл на редактирование, отредактируйте файл, заменив никнейм на строку "21 School 21", закройте файл без сохранения изменений.</li>
<li>

Используя каждый из трех выбранных редакторов, отредактируйте файл ещё раз (по аналогии с предыдущим пунктом), а затем освойте функции поиска по содержимому файла (слово) и замены слова на любое другое.</li>

<ul>

#### VIM

> vim test_VIM.txt  

<img src="./image/7.1.jpg" alt="Скриншот"/>
<img src="./image/7_1_2.jpg" alt="Скриншот"/>
<img src="./image/7_1_3.jpg" alt="Скриншот"/>

- vim test_VIM.txt
- Режим редактирования: I
- Выйти из режима редактирования: esc
- Выход с охранением: :wq
- Выход без сохранения: :q
- Поиск: /<текст, который хотим найти>
- Замена: :s/<что хотим изменить>/<на что хотим заменить>
Например: %s/School/University/g

#### MCEDIT

> mcedit test_NANO.txt  

<img src="./image/7.2.jpg" alt="Скриншот"/>
<img src="./image/7_2_2.jpg" alt="Скриншот"/>
<img src="./image/7_2_3.jpg" alt="Скриншот"/>

- mcedit test_mcedit.txt
- Выход с охранением: F2 (yes) + F10
- Выход без сохранения: F10(no)
- Поиск: F7 + <текст который ищем> + <ок>
- Замена: F4 + <что хотим изменить> + <на что хотим заменить> + replace

#### NANO

> nano test_NANO.txt  

<img src="./image/7.3.jpg" alt="Скриншот"/>
<img src="./image/7_3_2.jpg" alt="Скриншот"/>
<img src="./image/7_3_3.jpg" alt="Скриншот"/>

- nano test_NANO.txt
- Выход с сохранением: CTRL + x, затем y и enter
- Выход без сохранения: CTRL + x, затем n
- Поиск: CTRL + W, затем enter (alt + w для перехода к след. вхождению, ctrl + c для преращения поиска)
- Замена: CTRL + \\+ <что хотим изменить + enter> + <на что хотим заменить + enter> + A(для замены все вхождения) или y и n по отдельности
</ul>
</ol>
</div>


## №8. Установка и базовая настройка сервиса SSHD

<div>
<ol>
<li>

Установить службу SSHd.

- sudo apt-get install ssh
- sudo apt install openssh-server  
<img src="./image/8.1.JPG" alt="Скриншот"/></li>

<li>

Добавить автостарт службы при загрузке системы.

- sudo systemctl enable ssh
- systemctl status ssh  
<img src="./image/8.2.JPG" alt="Скриншот"/></li>

<li>

Перенастроить службу SSHd на порт 2022.

- sudo vim /etc/ssh/sshd_config
- systemctl restart sshd  
<img src="./image/8.3.JPG" alt="Скриншот"/>

</li>
<li>
Используя команду ps, показать наличие процесса sshd. Для этого к команде нужно подобрать ключи.

- `ps` (показывает запущенные процессы, выполняемые пользователем в окне терминала);
- `ps -e` или `ps -A` (Чтобы просмотреть все запущенные процессы);
- `ps -d` (Чтобы показать все процессы, кроме лидеров сессии);
- `ps -d -N` (можно инвертировать вывод с помощью переключателя -N. Например, если хочу вывести только лидеров сеансов)
- `ps T` (увидеть только процессы, связанные с этим терминалом);
- `ps r` (просмотреть все работающие (running) процессы);
- `ps -p` 'pid' (если вы знаете идентификатор процесса PID, вы можете просто использовать следующую команду, для вывода процесса с этим 'pid');
-`ps -p` 'pid1' 'pid2'
- ps U 'userlist' (найти все процессы, выполняемые конкретным пользователем);
- `ps -ef` (получить полный список);

<img src="./image/8.4.JPG" alt="Скриншот"/></li>

<li>

Перезагрузить систему</li>

### NETSTAT

<img src="./image/8.5.JPG" alt="Скриншот"/>  

- -t (--tcp) отображает соедниеня только по tcp
- -a (--all) вывод всех активных подключений TCP
- -n (--numeric) вывод активных подключений TCP с отображением адресов и номеров портов в числовом формате
- Proto: Название протокола (протокол TCP или протокол UDP);
- recv-Q: очередь получения сети
- send-Q: Сетевая очередь отправки
- Local Address адрес локального компьтера и используемы номер порта
- Foreign Address адрес и номер удаленного компьтера к которомц подключен сокет
- State состояние сокетв
- 0.0.0.0 означает IP-адрес на локальной машине

</ol>
</div>

## №9. Установка и использование утилит top, htop

### Установить и запустить утилиты top и htop

<div>
<ol>
<li>

По выводу команды top определить и написать в отчёте:

- uptime - 44min;
- количество авторизованных пользователей - 1;
- общую загрузку системы - 0.23, 0.12, 0.04
- общее количество процессов - 97;
- загрузку cpu - 0.0 us, 0.0 sy, 0.0 ni, 99.3 id, 0.3 wa, 0.0 hi, 0.3 si, 0.0 st;
- загрузку памяти - 144,2/634,1;
- pid процесса занимающего больше всего памяти - 1452 (top -o %MEM);
- pid процесса, занимающего больше всего процессорного времени - 1625 (top -o %CPU);

<img src="./image/9.1.JPG" alt="Скриншот"/>

</li>
<li>В отчёт вставить скрин с выводом команды htop:

  - отсортированному по PID, PERCENT_CPU, PERCENT_MEM, TIME
    
    <img src="./image/9.2.JPG" alt="Скриншот"/>
    <img src="./image/9.3.JPG" alt="Скриншот"/>
    <img src="./image/9.4.JPG" alt="Скриншот"/>
    <img src="./image/9.5.JPG" alt="Скриншот"/>
  - отфильтрованному для процесса sshd
    
    <img src="./image/9.6.JPG" alt="Скриншот"/>
  - с процессом syslog, найденным, используя поиск
    
    <img src="./image/9.7.JPG" alt="Скриншот"/>
  - с добавленным выводом hostname, clock и uptime
    
    <img src="./image/9.8.JPG" alt="Скриншот"/>

</li>
</ol>
</div>

## №10. Использование утилиты fdisk

<div>
<ol>
<li>

  Запустить команду fdisk -l

  <img src="./image/10.JPG" alt="Скриншот"/>
  <img src="./image/10.2.JPG" alt="Скриншот"/>

  - название жесткого диска - vbox harddisk;
  - размер - 15.98GiB;
  - количество секторов - 33465424;
  - размер swap - 1.9GiB.

</li>
</ol>
</div>


## №11. Использование утилиты df

<div>
<ol>
<li>Запустить команду df.
   В отчёте написать для корневого раздела (/):

  - размер раздела - 10218772;
  - размер занятого пространства - 4806884;
  - размер свободного пространства - 4871216;
  - процент использования - 50%;  

  Определить и написать в отчёт единицу измерения в выводе - килобайт

  <img src="./image/11.1.JPG" alt="Скриншот"/>

</li>
<li>Запустить команду df -Th.  
   В отчёте написать для корневого раздела (/):

  - размер раздела - 9.8G;
  - размер занятого пространства - 4.6G;
  - размер свободного пространства - 4.7G;
  - процент использования - 50%  

  Определить и написать в отчёт тип файловой системы для раздела - ext4.

  <img src="./image/11.2.JPG" alt="Скриншот"/>

</li>
</ol>
</div>



## №12. Использование утилиты du

<div>
<ol>
<li> 

Запустить команду du.

<img src="./image/12.1.JPG" alt="Скриншот"/>
</li>
<li> 

Вывести размер папок /home, /var, /var/log (в байтах)

<img src="./image/12.3.JPG" alt="Скриншот"/>

Вывести размер папок /home, /var, /var/log (в человекочитаемом виде)

<img src="./image/12.2.JPG" alt="Скриншот"/>
</li>
<li>

Вывести размер всего содержимого в /var/log (не общее, а каждого вложенного элемента, используя \-)

   <img src="./image/12.4.JPG" alt="Скриншот"/>

</li>
</ol>
</div>

## №13. Установка и использование утилиты ncdu

<div>
<ol>
<li>
Установить утилиту ncdu. Вывести размер папок /home, /var, /var/log.

   > sudo apt-get install ncdu  

   <img src="./image/13.1.JPG" alt="Скриншот"/>
   <img src="./image/13.2.JPG" alt="Скриншот"/>
   <img src="./image/13.3.JPG" alt="Скриншот"/>
</li>
</ol>
</div>

## №14. Работа с системными журналами

sudo vim /var/log/dmesg  
sudo vim /var/log/syslog  
sudo vim /var/log/auth.log

<div>
<ol>
<li>Написать в отчёте время последней успешной авторизации, имя пользователя и метод входа в систему (17:50:54; natalia by LOGIN)
</li>
<li> Перезапустить службу SSHd.

  > sudo systemctl restart ssh
</li>
<li>

Вставить в отчёт скрин с сообщением о рестарте службы (искать в логах).

   <img src="./image/14.1.JPG" alt="Скриншот"/>
   <img src="./image/14.2.JPG" alt="Скриншот"/>

</li>
</ol>
</div>

## №15. Использование планировщика заданий CRON

<div>
<ol>
<li> 

Используя планировщик заданий, запустите команду uptime через каждые 2 минуты.

  <img src="./image/15.1.JPG" alt="Скриншот"/>  
</li>
<li>

Найти в системных журналах строчки (минимум две в заданном временном диапазоне) о выполнении.
  > grep "uptime" /var/log/syslog

  <img src="./image/15.2.JPG" alt="Скриншот"/>  

</li>

<li> 

Удалите все задания из планировщика заданий.

  <img src="./image/15.3.JPG" alt="Скриншот"/>  

</li>
</ol>
</div>
